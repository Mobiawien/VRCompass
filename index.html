<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-i18n-key="PAGE_TITLE">VR Compass - Calcolatrice Gestione Crediti</title>
    <!-- Inclusione di Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <nav>
        <button id="btn-show-dashboard" class="nav-button active" data-i18n-key="NAV_DASHBOARD">Dashboard</button>
        <button id="btn-show-gestione-crediti" class="nav-button" data-i18n-key="NAV_CREDITS">Gestione Crediti</button>
        <button id="btn-show-classifica-vsr" class="nav-button" data-i18n-key="NAV_VSR_RANKING">Gestione Classifica VSR</button>
        <button id="btn-show-analisi" class="nav-button" data-i18n-key="NAV_ANALYSIS">Analisi</button>
        <button id="btn-show-strategia" class="nav-button" data-i18n-key="NAV_STRATEGY">Strategia</button>
        <!-- Selettore lingua -->
        <select id="language-selector" class="nav-button" style="font-style: normal;">
            <option value="en">English</option>
            <option value="it">Italiano</option>
            <option value="fr">Français</option>
        </select>
        <!-- Spostato qui il badge versione -->
        <span class="version-badge">VRCompass v1.6.0</span>
    </nav>

    <div id="dashboard-view" class="view-section">
        <div id="dashboard-background-content"> <!-- NUOVO CONTENITORE PER LO SFONDO -->

            <!-- Contenitore principale per il layout a due colonne della dashboard -->
            <div class="dashboard-layout">

                <!-- Colonna Sinistra -->
                <div class="dashboard-column-left">
                    <!-- Card: Stato Attuale -->
                    <div class="dashboard-card" id="stato-attuale-card">
                        <div class="dashboard-item">
                            <label for="nome-barca" data-i18n-key="DASHBOARD_BOAT_NAME_LABEL">Nome Barca:</label>
                            <input type="text" id="nome-barca" data-i18n-key="DASHBOARD_BOAT_NAME_PLACEHOLDER" placeholder="Inserisci nome barca" size="30">
                        </div>
                        <div class="dashboard-item" id="gestione-dati-pulsanti">
                            <span class="dashboard-descriptor" data-i18n-key="DASHBOARD_DATA_MANAGEMENT_LABEL">Gestione Dati:</span>
                            <div class="pulsanti-wrapper">
                                <button id="btn-esporta-dati" class="dashboard-action-button" data-i18n-key="DASHBOARD_EXPORT_DATA_BUTTON">Esporta Dati</button>
                                <label for="file-importa-dati" class="dashboard-action-button" style="cursor: pointer;" data-i18n-key="DASHBOARD_IMPORT_DATA_BUTTON">Importa Dati</label>
                                <input type="file" id="file-importa-dati" accept=".json" style="display: none;">
                            </div>
                        </div>
                        <div class="dashboard-item dashboard-item-flex-space-between">
                            <div>
                                <span class="dashboard-descriptor" data-i18n-key="DASHBOARD_CURRENT_VSR_SCORE_LABEL">Punteggio VSR Attuale:</span>
                                <span id="classifica-vsr-attuale" class="valore-display">N/D</span>
                            </div>
                        </div>
                    </div>

                    <!-- Card: Grafico Radar -->
                    <div class="dashboard-card" id="grafico-radar-card">
                        <h3 data-i18n-key="DASHBOARD_RADAR_CHART_TITLE">Radar Punti VSR</h3>
                        <div id="grafico-radar-container" style="max-width: 500px; margin-left:auto; margin-right:auto;">
                            <canvas id="graficoRadarSaluteSlot"></canvas>
                        </div>
                    </div>
                </div>

                <!-- Colonna Destra -->
                <div class="dashboard-column-right">
                    <div class="dashboard-card" id="info-gestione-card">
                        <!-- <h3>VRCompass: Info & Strumenti</h3> --> <!-- Titolo rimosso come richiesto -->

                        <div class="info-gestione-sezione">
                            <h3 data-i18n-key="DASHBOARD_WELCOME_TITLE">Benvenuto in VRCompass!</h3>
                            <p data-i18n-key="DASHBOARD_WELCOME_P1">
                                VRCompass è il tuo alleato strategico per Virtual Regatta Offshore. Più che una bussola per la navigazione in mare, è uno strumento progettato per aiutarti a gestire al meglio la tua strategia di gioco, ottimizzare la classifica VSR, amministrare i crediti e pianificare le tue regate con maggiore consapevolezza.
                            </p>
                            <p data-i18n-key="DASHBOARD_WELCOME_P2">
                                Qui puoi monitorare lo stato della tua barca, analizzare la tua classifica VSR, gestire i crediti di gioco e pianificare le tue mosse.
                            </p>
                            <p data-i18n-key="DASHBOARD_WELCOME_P3">
                                Esplora le sezioni tramite il menu di navigazione per accedere a tutte le funzionalità.
                            </p>
                        </div>

                        <div class="info-gestione-sezione" id="gestione-dati-dashboard">
                            <h3 data-i18n-key="DASHBOARD_USER_DATA_TITLE">Gestione Dati Utente</h3>
                            <div id="gestione-dati-section"> <!-- Manteniamo l'ID originale per la logica JS -->
                                <p data-i18n-key="DASHBOARD_USER_DATA_P1">
                                    I tuoi dati (nome barca, punteggio VSR e storico regate) sono salvati esclusivamente nel tuo browser (tramite <code>localStorage</code>).
                                </p>
                                <p data-i18n-key="DASHBOARD_USER_DATA_P2">
                                    Per sicurezza o per trasferire i dati su un altro dispositivo/browser, puoi esportarli in un file e successivamente importarli.
                                </p>
                                <p style="font-size: 0.9em; margin-top: 10px;">
                                    <span data-i18n-key="DASHBOARD_USER_DATA_HOW_TO_TITLE"><strong>Come usare:</strong></span><br>
                                    <span data-i18n-key="DASHBOARD_USER_DATA_HOW_TO_LI1">- <strong>Esporta Dati:</strong> Clicca sul pulsante "Esporta Dati" (nella card "Stato Attuale") per scaricare un file (<code>VRCompass_backup.json</code>) contenente tutti i tuoi dati attuali. Conserva questo file in un luogo sicuro.</span><br>
                                    <span data-i18n-key="DASHBOARD_USER_DATA_HOW_TO_LI2">- <strong>Importa Dati:</strong> Clicca sul pulsante "Importa Dati" (nella card "Stato Attuale") per selezionare un file <code>.json</code> precedentemente esportato. I dati nel file sovrascriveranno quelli attualmente presenti nell'applicazione.</span>
                                </p>
                                <!-- Reintrodotto il ringraziamento -->
                                <p style="margin-top: 15px; font-size: 0.9em; color: #007bff;" data-i18n-key="DASHBOARD_USER_DATA_THANKS">
                                    Un ringraziamento speciale al nostro Capitano <strong>ITA 86 FIV / Cristian</strong> per la sua preziosa collaborazione nella gestione e nell'aggiornamento dell'elenco regate, rendendo VRCompass uno strumento ancora più potente!
                                </p>
                                <p style="margin-top: 15px; font-size: 0.9em; color: #555;" data-i18n-key="DASHBOARD_USER_DATA_NOTE_P1">
                                    <strong>Nota:</strong> Dopo ogni modifica ai dati delle gare o alle informazioni generali (come il nome della barca), è consigliabile <strong>esportare nuovamente i dati</strong> per assicurarsi di avere un backup aggiornato.
                                </p>
                            </div>
                        </div>

                        <div class="info-gestione-sezione" id="informativa-dashboard">
                            <h3 data-i18n-key="DASHBOARD_INFO_DISCLAIMER_TITLE">Informativa e Disclaimer</h3>
                            <div id="informativa-disclaimer-section"> <!-- Manteniamo l'ID originale per la logica JS -->
                                <p data-i18n-key="DASHBOARD_INFO_DISCLAIMER_DATA_MANAGEMENT_P1"></p>
                                <p data-i18n-key="DASHBOARD_INFO_DISCLAIMER_ACCURACY_P1"></p>
                                <p data-i18n-key="DASHBOARD_INFO_DISCLAIMER_ACCURACY_P2" style="background-color: #fff3cd; color: #664d03; padding: 10px; border-radius: 4px; border: 1px solid #ffecb5;"></p>
                            </div>
                            <!-- I paragrafi Responsabilità e Copyright sono stati spostati più in basso, fuori da questo div -->
                        </div>
                    </div>
                </div>
            </div>
        </div> <!-- FINE NUOVO CONTENITORE PER LO SFONDO -->

        <!-- Note a piè di pagina per Responsabilità e Copyright -->
        <div id="dashboard-footer-notes">
            <p data-i18n-key="DASHBOARD_FOOTER_RESPONSIBILITY_P1"><strong>Responsabilità:</strong> Gli sviluppatori di VR Compass non sono responsabili per eventuali perdite di dati, danni o altri problemi derivanti dall'uso di questa applicazione. Si consiglia di utilizzare la funzione di esportazione per creare backup regolari dei propri dati.</p>
            <p data-i18n-key="DASHBOARD_FOOTER_COPYRIGHT_P1"><strong>Copyright e Licenza:</strong> Il codice sorgente di questa applicazione è rilasciato sotto i termini della <a href="https://raw.githubusercontent.com/mobiawien/VRCompass/main/LICENSE" target="_blank">MIT License</a>, che ne definisce le condizioni d'uso, modifica e distribuzione.</p>
            <footer>
                <p data-i18n-key="DASHBOARD_FOOTER_COPYRIGHT_TEXT">&copy; 2025 Velatopiano-La Casa di Hilde - VRCompass | <a href="#" onclick="document.getElementById('informativa-dashboard').scrollIntoView({ behavior: 'smooth' }); return false;">Disclaimer & Gestione Dati</a></p>
            </footer>
        </div>
    </div>

    <div id="gestione-crediti-view" class="view-section" style="display: none;"> <!-- ID Modificato -->
        <h1 data-i18n-key="CREDITS_PAGE_TITLE">Gestione Crediti</h1> <!-- Titolo Modificato -->
        <p data-i18n-key="CREDITS_PAGE_DESCRIPTION">Calcola costi, bonus, crediti vinti, netto e punti VSR per una specifica gara. Determina la classifica minima per recuperare i costi.</p> <!-- Descrizione leggermente aggiornata -->

        <div id="container-principale-calcolatrice"> <!-- Contenitore specifico per la calcolatrice -->
            <div>
                <h2 data-i18n-key="CREDITS_TABLE1_TITLE">Tabella dei costi e dei bonus x Cat. economica</h2>
                <table id="tabella1">
                    <thead>
                        <tr>
                            <th data-i18n-key="CREDITS_TABLE1_HEADER_EQUIPMENT_COSTS">Costi attrezzature</th>
                            <th class="categoria-cell" data-categoria="cat1"><span data-i18n-key="CREDITS_TABLE1_HEADER_CATEGORY_PREFIX">Cat.</span> 1</th>
                            <th class="categoria-cell" data-categoria="cat2"><span data-i18n-key="CREDITS_TABLE1_HEADER_CATEGORY_PREFIX">Cat.</span> 2</th>
                            <th class="categoria-cell" data-categoria="cat3"><span data-i18n-key="CREDITS_TABLE1_HEADER_CATEGORY_PREFIX">Cat.</span> 3</th>
                            <th class="categoria-cell" data-categoria="cat4"><span data-i18n-key="CREDITS_TABLE1_HEADER_CATEGORY_PREFIX">Cat.</span> 4</th>
                            <th class="categoria-cell" data-categoria="cat5"><span data-i18n-key="CREDITS_TABLE1_HEADER_CATEGORY_PREFIX">Cat.</span> 5</th>
                            <th class="categoria-cell" data-categoria="cat6"><span data-i18n-key="CREDITS_TABLE1_HEADER_CATEGORY_PREFIX">Cat.</span> 6</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr class="bonus-row"><td data-i18n-key="CREDITS_TABLE1_ROW_BONUS">bonus</td><td data-categoria="cat1">2200</td><td data-categoria="cat2">1800</td><td data-categoria="cat3">1400</td><td data-categoria="cat4">1200</td><td data-categoria="cat5">600</td><td data-categoria="cat6">300</td></tr>
                        <tr><td data-i18n-key="CREDITS_EQUIPMENT_FOILS">Foils</td><td data-categoria="cat1" class="attrezzatura-cell">1990</td><td data-categoria="cat2" class="attrezzatura-cell">1660</td><td data-categoria="cat3" class="attrezzatura-cell">1340</td><td data-categoria="cat4" class="attrezzatura-cell">1010</td><td data-categoria="cat5" class="attrezzatura-cell">650</td><td data-categoria="cat6" class="attrezzatura-cell">330</td></tr>
                        <tr><td data-i18n-key="CREDITS_EQUIPMENT_REACHING_SAIL">Reaching Sail</td><td data-categoria="cat1" class="attrezzatura-cell">1430</td><td data-categoria="cat2" class="attrezzatura-cell">1190</td><td data-categoria="cat3" class="attrezzatura-cell">950</td><td data-categoria="cat4" class="attrezzatura-cell">710</td><td data-categoria="cat5" class="attrezzatura-cell">480</td><td data-categoria="cat6" class="attrezzatura-cell">240</td></tr>
                        <tr><td data-i18n-key="CREDITS_EQUIPMENT_LIGHT_WIND_SAILS">Light wind sails</td><td data-categoria="cat1" class="attrezzatura-cell">1260</td><td data-categoria="cat2" class="attrezzatura-cell">1050</td><td data-categoria="cat3" class="attrezzatura-cell">840</td><td data-categoria="cat4" class="attrezzatura-cell">630</td><td data-categoria="cat5" class="attrezzatura-cell">420</td><td data-categoria="cat6" class="attrezzatura-cell">210</td></tr>
                        <tr><td data-i18n-key="CREDITS_EQUIPMENT_STRONG_WIND_SAILS">Strong wind sails</td><td data-categoria="cat1" class="attrezzatura-cell">1010</td><td data-categoria="cat2" class="attrezzatura-cell">840</td><td data-categoria="cat3" class="attrezzatura-cell">670</td><td data-categoria="cat4" class="attrezzatura-cell">500</td><td data-categoria="cat5" class="attrezzatura-cell">340</td><td data-categoria="cat6" class="attrezzatura-cell">170</td></tr>
                        <tr><td data-i18n-key="CREDITS_EQUIPMENT_WINCHS_PRO">Winchs pro</td><td data-categoria="cat1" class="attrezzatura-cell">900</td><td data-categoria="cat2" class="attrezzatura-cell">750</td><td data-categoria="cat3" class="attrezzatura-cell">600</td><td data-categoria="cat4" class="attrezzatura-cell">450</td><td data-categoria="cat5" class="attrezzatura-cell">300</td><td data-categoria="cat6" class="attrezzatura-cell">150</td></tr>
                        <tr><td data-i18n-key="CREDITS_EQUIPMENT_HULL_POLISH">Hull Polish</td><td data-categoria="cat1" class="attrezzatura-cell">590</td><td data-categoria="cat2" class="attrezzatura-cell">490</td><td data-categoria="cat3" class="attrezzatura-cell">390</td><td data-categoria="cat4" class="attrezzatura-cell">290</td><td data-categoria="cat5" class="attrezzatura-cell">200</td><td data-categoria="cat6" class="attrezzatura-cell">100</td></tr>
                        <tr><td data-i18n-key="CREDITS_EQUIPMENT_MAGIC_FURLER">Magic Furler</td><td data-categoria="cat1" class="attrezzatura-cell">1140</td><td data-categoria="cat2" class="attrezzatura-cell">950</td><td data-categoria="cat3" class="attrezzatura-cell">760</td><td data-categoria="cat4" class="attrezzatura-cell">570</td><td data-categoria="cat5" class="attrezzatura-cell">380</td><td data-categoria="cat6" class="attrezzatura-cell">190</td></tr>
                        <tr><td data-i18n-key="CREDITS_EQUIPMENT_VRTEX_JACKET">VRTex Jacket</td><td data-categoria="cat1" class="attrezzatura-cell">1020</td><td data-categoria="cat2" class="attrezzatura-cell">850</td><td data-categoria="cat3" class="attrezzatura-cell">680</td><td data-categoria="cat4" class="attrezzatura-cell">510</td><td data-categoria="cat5" class="attrezzatura-cell">340</td><td data-categoria="cat6" class="attrezzatura-cell">170</td></tr>
                        <tr><td data-i18n-key="CREDITS_EQUIPMENT_COMFORT_LOUNGE">Comfort lounge</td><td data-categoria="cat1" class="attrezzatura-cell">780</td><td data-categoria="cat2" class="attrezzatura-cell">650</td><td data-categoria="cat3" class="attrezzatura-cell">520</td><td data-categoria="cat4" class="attrezzatura-cell">390</td><td data-categoria="cat5" class="attrezzatura-cell">260</td><td data-categoria="cat6" class="attrezzatura-cell">130</td></tr>
                    </tbody>
                </table>

                <h2 data-i18n-key="CREDITS_TABLE2_TITLE">Calcolo posizione classifica per recupero crediti</h2>
                <table id="tabella2">
                    <thead>
                        <tr>
                            <th scope="col" data-i18n-key="CREDITS_TABLE2_HEADER_ECONOMIC_CATEGORY">Cat. Econ.</th>
                            <th scope="col" data-i18n-key="CREDITS_TABLE2_HEADER_BONUS_BASE_EXTRA">Bonus (Base + Extra)</th>
                            <th scope="col" data-i18n-key="CREDITS_TABLE2_HEADER_EXPENSE">spesa</th>
                            <th scope="col" data-i18n-key="CREDITS_TABLE2_HEADER_EFFECTIVE_EXPENSE">spesa effettiva</th>
                            <th scope="col" data-i18n-key="CREDITS_TABLE2_HEADER_RECOVERY_POSITION">Pos. x Recupero</th>
                        </tr>
                    </thead>
                    <tbody>
                        <!-- Riga statica per i risultati -->
                        <tr id="calcolatrice-risultati-riga2">
                            <td id="output-cat-econ" class="calculated-result-cell">N/D</td>
                            <td><input type="number" id="input-bonus-totale" value="0" min="0" title="Bonus Base + Extra"></td>
                            <td id="output-spesa" class="calculated-result-cell">N/D</td>
                            <td id="output-spesa-effettiva" class="calculated-result-cell">N/D</td>
                            <td id="output-pos-recupero" class="calculated-result-cell">N/D</td>
                        </tr>
                    </tbody>
                </table>

                <h2 data-i18n-key="CREDITS_TABLE3_TITLE">Calcolo crediti e punti VSR</h2>
                <table id="tabella3" aria-label="Calcolo crediti e punti VSR">
                    <thead>
                        <tr>
                            <th scope="col" data-i18n-key="CREDITS_TABLE3_HEADER_RACE_LEVEL">Livello Gara (VSR)</th>
                            <th scope="col" data-i18n-key="CREDITS_TABLE3_HEADER_FINAL_RANKING">Classifica Finale</th> <!-- Tradotto -->
                            <th scope="col" data-i18n-key="CREDITS_TABLE3_HEADER_CREDITS_WON">Crediti Vinti</th>    <!-- Tradotto -->
                            <th scope="col" data-i18n-key="CREDITS_TABLE3_HEADER_NET_CREDITS">Netto Crediti</th>    <!-- Tradotto -->
                            <th scope="col" data-i18n-key="CREDITS_TABLE3_HEADER_VSR_POINTS">Punti VSR</th>        <!-- Tradotto -->
                        </tr>
                    </thead>
                    <tbody>
                        <!-- La riga verrà aggiunta/modificata dinamicamente con JavaScript -->
                    </tbody>
                </table>
            </div>

            <div id="istruzioni">
                <h2 data-i18n-key="CREDITS_GUIDE_TITLE">Guida all'utilizzo della Gestione Crediti</h2> <!-- Titolo Guida Modificato -->
                <p data-i18n-key="CREDITS_GUIDE_INTRO_P1">
                    Questa sezione è progettata per calcolare il premio in crediti ottenibile nella classifica finale di una regata, in base alla sua categoria economica. Permette di effettuare simulazioni, considerando il bonus di gara e i costi delle attrezzature selezionate, per determinare la classifica minima necessaria per raggiungere il pareggio o generare un profitto in crediti.
                </p>
                <p data-i18n-key="CREDITS_GUIDE_QUICK_TITLE">Guida rapida all'utilizzo:</p>
                <ul>
                    <li data-i18n-key="CREDITS_GUIDE_STEP1"><strong>Selezione Categoria Economica:</strong> Selezionare con un clic l'intestazione della colonna (cat. 1, cat. 2, ...) corrispondente alla categoria economica della regata nella "Tabella dei costi e dei bonus".</li>
                    <li data-i18n-key="CREDITS_GUIDE_STEP2"><strong>Selezione Attrezzature:</strong> Cliccare sulle celle dei costi delle attrezzature che si intende utilizzare nella "Tabella dei costi e dei bonus". Quando la spesa totale supera il bonus iniziale (visibile nella tabella "Calcolo posizione classifica per recupero crediti"), verrà visualizzata la "Spesa Effettiva" e la "Pos. x Recupero", ovvero la posizione minima in classifica necessaria per recuperare l'investimento.</li>
                    <li data-i18n-key="CREDITS_GUIDE_STEP3"><strong>Inserimento Bonus Extra:</strong> Nel caso di bonus aggiuntivi, inserire l'ammontare nella casella "Bonus" della tabella "Calcolo posizione classifica per recupero crediti".</li>
                    <li data-i18n-key="CREDITS_GUIDE_STEP4"><strong>Simulazione Risultati:</strong> Nella tabella "Calcolo crediti e punti VSR", selezionare il "Livello Gara (VSR)" e inserire una "Classifica Finale" ipotetica per vedere i "Crediti Vinti"*, il "Netto Crediti" e i "Punti VSR" corrispondenti.</li>
                </ul>
                <p data-i18n-key="CREDITS_GUIDE_NOTE">*Nota: I "Crediti Vinti" visualizzati potrebbero differire leggermente dai valori effettivi in gioco a causa del metodo di arrotondamento specifico adottato da Virtual Regatta Offshore.</p>
            </div>
        </div> <!-- Fine container-principale-calcolatrice -->
         <p id="autore-calcolatrice" class="autore-credits" data-i18n-key="CREDITS_AUTHOR_TEXT">Calcolatrice by Velatopiano-La Casa di Hilde</p>
    </div>

    <!-- Sezione Gestione Classifica VSR - AGGIORNATA -->
    <div id="classifica-vsr-view" class="view-section" style="display: none;">
        <h1 data-i18n-key="VSR_PAGE_TITLE">Gestione Classifica VSR</h1>

        <div id="container-principale-vsr"> <!-- Nuovo contenitore principale per layout a colonne -->
            <div id="contenuto-vsr"> <!-- Contenitore per il contenuto principale (form, tabelle) -->
                <!-- Blocco per mostrare dati dalla Dashboard -->
                <div style="margin-bottom: 20px; padding: 10px; background-color: #e9ecef; border-radius: 5px;">
                    <strong data-i18n-key="VSR_INFO_BOAT">Barca:</strong> <span id="nome-barca-display">N/D</span> |
                    <strong data-i18n-key="VSR_INFO_CURRENT_SCORE">Punteggio VSR attuale:</strong> <span id="classifica-vsr-attuale-display">N/D</span>
                </div>

                <!-- Titolo del form, sarà gestito da JS per cambiare testo -->
                <h2 id="titolo-form-gara">Aggiungi Risultato Gara</h2>
                <!-- Form per aggiungere nuove gare -->
                <form id="form-aggiungi-gara">
                    <label for="data-gara" data-i18n-key="VSR_FORM_LABEL_DATE">Data:</label>
                    <input type="date" id="data-gara" name="data-gara" required>

                    <label for="nome-regata" data-i18n-key="VSR_FORM_LABEL_RACE_NAME">Nome Regata:</label>
                    <input type="text" id="nome-regata" name="nome-regata">

                    <label for="livello-gara-vsr-storico" data-i18n-key="VSR_FORM_LABEL_RACE_LEVEL">Livello Gara (VSR):</label>
                    <select id="livello-gara-vsr-storico" name="livello-gara-vsr-storico">
                        <option value="0" data-i18n-key="VSR_FORM_SELECT_LEVEL_OPTION_DEFAULT">Seleziona Livello VSR</option>
                        <option value="HC" data-i18n-key="VSR_FORM_SELECT_LEVEL_OPTION_HC">Fuori Categoria</option>
                        <option value="LIV1" data-i18n-key="VSR_FORM_SELECT_LEVEL_OPTION_L1">Livello 1</option>
                        <option value="LIV2" data-i18n-key="VSR_FORM_SELECT_LEVEL_OPTION_L2">Livello 2</option>
                        <option value="LIV3" data-i18n-key="VSR_FORM_SELECT_LEVEL_OPTION_L3">Livello 3</option>
                    </select>

                    <label for="classifica-finale-storico" data-i18n-key="VSR_FORM_LABEL_FINAL_RANKING">Classifica Finale:</label>
                    <input type="number" id="classifica-finale-storico" name="classifica-finale-storico" min="1" required>

                    <label for="punti-vsr-calcolati" data-i18n-key="VSR_FORM_LABEL_VSR_POINTS">Punti VSR:</label> <!-- Campo chiave per il calcolo -->
                    <input type="number" id="punti-vsr-calcolati" name="punti-vsr-calcolati" step="any" required readonly>
                    
                    <button type="submit">Aggiungi Gara</button>
                    <div class="form-spacer"></div> <!-- Questo elemento si espanderà per spingere il pulsante successivo a destra -->
                    <button id="btn-apri-modal-elenco-regate" class="dashboard-action-button" data-i18n-key="VSR_BTN_LOAD_FROM_LIST">Carica da Elenco Regate</button>
                </form>

                <!-- Pulsanti per filtrare la visualizzazione dello storico -->
                <div class="filtri-visualizzazione-storico" style="margin-bottom: 10px;">
                    <button id="btn-mostra-gare-valide" class="nav-button filtro-btn active" data-i18n-key="VSR_FILTER_BTN_VALID">Mostra Valide per Classifica</button>
                    <button id="btn-mostra-tutte-gare" class="nav-button filtro-btn" data-i18n-key="VSR_FILTER_BTN_HISTORY">Storico Regate</button>
                    <button id="btn-storico-hc" class="nav-button filtro-btn" data-i18n-key="VSR_FILTER_BTN_HC">Fuori Cat.</button>
                    <button id="btn-storico-liv1" class="nav-button filtro-btn" data-i18n-key="VSR_FILTER_BTN_L1">Liv. 1</button>
                    <button id="btn-storico-liv2" class="nav-button filtro-btn" data-i18n-key="VSR_FILTER_BTN_L2">Liv. 2</button>
                    <button id="btn-storico-liv3" class="nav-button filtro-btn" data-i18n-key="VSR_FILTER_BTN_L3">Liv. 3</button>
                </div>
                <!-- Tabella per visualizzare le gare salvate -->
                <table id="tabella-classifica-vsr">
                    <thead>
                        <tr>
                            <th data-i18n-key="VSR_TABLE_HEADER_DATE">Data</th>
                            <th style="width: 35%;" data-i18n-key="VSR_TABLE_HEADER_RACE_NAME">Nome Regata</th>
                            <th data-i18n-key="VSR_TABLE_HEADER_LEVEL">Livello</th>
                            <th style="width: 15%;" data-i18n-key="VSR_TABLE_HEADER_FINAL_RANKING">Classifica Finale</th>
                            <th style="width: 15%;" data-i18n-key="VSR_TABLE_HEADER_VSR_POINTS">Punti VSR</th>
                            <th data-i18n-key="VSR_TABLE_HEADER_POINTS_STATUS">Stato Punti</th> <!-- Nuova intestazione colonna -->
                            <th id="header-colonna-azioni" data-i18n-key="VSR_TABLE_HEADER_ACTIONS">Azioni</th>
                        </tr>
                    </thead>
                    <tbody id="classifica-vsr-tbody">
                        <!-- Righe aggiunte dinamicamente da JavaScript -->
                    </tbody>
                </table>
            </div> <!-- Fine contenuto-vsr -->

            <div id="istruzioni-vsr-box"> <!-- Box istruzioni spostato qui -->
                <h2 data-i18n-key="VSR_GUIDE_TITLE">Guida alla Gestione Classifica VSR</h2>
                <p data-i18n-key="VSR_GUIDE_INTRO_P1">
                    Questa sezione ti permette di archiviare i risultati delle tue gare e di calcolare automaticamente i Punti VSR guadagnati. VRCompass ti aiuta a monitorare la validità dei tuoi punteggi e a capire come contribuiscono alla tua classifica VSR.
                </p>
                <p data-i18n-key="VSR_GUIDE_INPUT_METHODS_INTRO">
                    <!-- Questo testo verrà popolato dalla traduzione VSR_GUIDE_INPUT_METHODS_INTRO -->
                </p>
                <p data-i18n-key="VSR_GUIDE_DATA_INSERTION_TITLE"><strong>Inserimento Dati:</strong></p>
                <ol>
                    <li data-i18n-key="VSR_GUIDE_DATA_INSERTION_STEP1"><strong>Data:</strong> Inserisci la data di conclusione della gara.</li>
                    <li data-i18n-key="VSR_GUIDE_DATA_INSERTION_STEP2"><strong>Nome Regata:</strong> Inserisci un nome identificativo per la regata.</li>
                    <li data-i18n-key="VSR_GUIDE_DATA_INSERTION_STEP3"><strong>Livello Gara (VSR):</strong> Seleziona il livello corretto della gara dal menu a tendina. Questi livelli corrispondono alle categorie ufficiali VRO.</li>
                    <li data-i18n-key="VSR_GUIDE_DATA_INSERTION_STEP4"><strong>Classifica Finale:</strong> Inserisci la tua posizione finale nella regata.</li>
                    <li data-i18n-key="VSR_GUIDE_DATA_INSERTION_STEP5"><strong>Punti VSR:</strong> Vengono calcolati e visualizzati automaticamente da VRCompass in base al Livello Gara e alla Classifica Finale (usando la formula <code>PuntiMaxCategoria / (Classifica<sup>0.125</sup>)</code>, arrotondati).</li>
                    <li data-i18n-key="VSR_GUIDE_DATA_INSERTION_STEP6">Clicca su "Aggiungi Gara" per salvare il risultato nello storico.</li>
                </ol>
                <p data-i18n-key="VSR_GUIDE_LOAD_SUGGESTED_TITLE"><strong>Caricare Regate da Elenco Suggerito:</strong></p>
                <ol>
                    <li data-i18n-key="VSR_GUIDE_LOAD_SUGGESTED_STEP1">Clicca sul pulsante "Carica da Elenco Regate". Verrà visualizzato un elenco di regate suggerite, con l'indicazione della data dell'ultimo aggiornamento e la menzione che l'elenco è curato da <strong>ITA 86 FIV / Cristian</strong>.</li>
                    <li>
                        <span data-i18n-key="VSR_GUIDE_LOAD_SUGGESTED_STEP2_INTRO">Scorri l'elenco. Per ogni regata a cui hai partecipato e che desideri aggiungere al tuo storico:</span>
                        <ul>
                            <li data-i18n-key="VSR_GUIDE_LOAD_SUGGESTED_STEP2_ACTION1">Inserisci la tua <strong>Classifica Finale</strong> nell'apposito campo.</li>
                            <li data-i18n-key="VSR_GUIDE_LOAD_SUGGESTED_STEP2_ACTION2">Clicca sul pulsante "Aggiungi" accanto alla regata.</li>
                        </ul>
                    </li>
                    <li data-i18n-key="VSR_GUIDE_LOAD_SUGGESTED_STEP3">La regata verrà aggiunta al tuo storico VSR con i punti calcolati in base alla classifica inserita. Il pulsante "Aggiungi" per quella regata nell'elenco suggerito diventerà "Già Aggiunta" e sarà disabilitato.</li>
                    <li data-i18n-key="VSR_GUIDE_LOAD_SUGGESTED_STEP4">Puoi cliccare nuovamente su "Nascondi Elenco Regate" (il testo del pulsante cambia) per chiudere la visualizzazione dell'elenco.</li>
                </ol>
                <p data-i18n-key="VSR_GUIDE_READ_TABLES_TITLE"><strong>Come Leggere le Tabelle delle Gare:</strong></p>
                <p data-i18n-key="VSR_GUIDE_READ_TABLES_INTRO">La tabella mostra le tue gare. Usa i pulsanti di filtro:</p>
                <ul>
                    <li data-i18n-key="VSR_GUIDE_READ_TABLES_FILTER_VALID"><strong>Mostra Valide per Classifica:</strong> Visualizza solo le gare che VRCompass considera per il tuo Punteggio VSR Totale (massimo 40: 2 Fuori Categoria, 6 Liv.1, 12 Liv.2, 20 Liv.3, selezionando le migliori per ogni livello nelle due fasce temporali: &lt;12 mesi e 12-24 mesi). Le gare sono raggruppate per livello e ordinate per punti effettivi.</li>
                    <li data-i18n-key="VSR_GUIDE_READ_TABLES_FILTER_HISTORY"><strong>Storico Regate (Aggiorna):</strong> Visualizza tutte le gare inserite, ordinate dalla più recente. Qui puoi modificare o eliminare le gare.</li>
                    <li data-i18n-key="VSR_GUIDE_READ_TABLES_FILTER_LEVEL"><strong>[Nome Livello]:</strong> Visualizza tutte le gare inserite per uno specifico livello (es. "Fuori Cat."), ordinate dalla più recente. Anche qui puoi modificare o eliminare le gare.</li>
                </ul>
                <p data-i18n-key="VSR_GUIDE_READ_TABLES_ROW_COLOR_INTRO">Ogni riga della tabella è colorata da VRCompass per indicare la validità temporale dei punti:</p>
                <ul>
                    <li data-i18n-key="VSR_GUIDE_READ_TABLES_ROW_COLOR_GREEN"><span style="background-color: #d4edda; color: #155724; padding: 2px 5px; border-radius: 3px;">Riga Verde Chiaro</span>: Gara entro 12 mesi (punti al 100%).</li>
                    <li data-i18n-key="VSR_GUIDE_READ_TABLES_ROW_COLOR_YELLOW"><span style="background-color: #fff3cd; color: #856404; padding: 2px 5px; border-radius: 3px;">Riga Giallo Chiaro</span>: Gara tra 12 e 24 mesi (punti al 50% del loro valore originale).</li>
                    <li data-i18n-key="VSR_GUIDE_READ_TABLES_ROW_COLOR_GRAY"><span style="background-color: #e9ecef; color: #6c757d; padding: 2px 5px; border-radius: 3px;">Riga Grigio Chiaro</span>: Gara che non contribuisce al Punteggio VSR Totale. Questo si verifica per gare scadute (oltre 24 mesi) oppure, anche se la gara non è temporalmente scaduta, il suo punteggio non è sufficiente per rientrare tra le migliori 40 selezionate per la classifica (particolarmente visibile nella vista "Mostra Valide per Classifica").</li>
                </ul>
                <p data-i18n-key="VSR_GUIDE_READ_TABLES_POINTS_STATUS_COL">La colonna "Stato Punti" (visibile in "Mostra Valide per Classifica") indica "100%" o "50%" per la contribuzione dei punti.</p>
                <p data-i18n-key="VSR_GUIDE_READ_TABLES_WARNINGS"><strong>Preavvisi:</strong> Le gare negli ultimi 3 mesi prima di un dimezzamento (100% &rarr; 50%) o scadenza (50% &rarr; 0%) sono evidenziate con un <span style="border-left: 3px solid #dc3545; padding-left: 3px;">bordo rosso a sinistra</span>. In "Mostra Valide per Classifica", lo "Stato Punti" includerà "(Preavviso)".</p>
                <p data-i18n-key="VSR_GUIDE_READ_TABLES_VSR_POINTS_COL">
                        La colonna "Punti VSR" mostra i punti originali in "Storico Regate". In "Mostra Valide per Classifica", mostra i punti <em>effettivi</em> che contribuiscono (100% o 50% del valore originale, colorati di rosso se al 50%). Il "Punteggio VSR attuale" (visibile sopra il form) è sempre calcolato da VRCompass tenendo conto di questi fattori.
                </p>
            </div> <!-- Fine istruzioni-vsr-box -->

        </div> <!-- Fine container-principale-vsr -->
        <p id="autore-classifica" class="autore-credits" data-i18n-key="VSR_AUTHOR_TEXT">Gestione Classifica by Velatopiano-La Casa di Hilde</p>

        <!-- Struttura della Finestra Modale per l'Elenco Regate (Spostata qui) -->
        <div id="modal-elenco-regate" class="modal" style="display: none;">
            <div class="modal-content">
                <span class="close-button" id="btn-chiudi-modal-elenco-regate">&times;</span>
                <h2 data-i18n-key="VSR_MODAL_TITLE_SUGGESTED_RACES">Elenco Regate Suggerite</h2>
                <p id="info-aggiornamento-elenco-regate" style="font-size: 0.9em; color: #6c757d;"></p>
                <div class="modal-table-container"> <!-- Contenitore per rendere la tabella scrollabile -->
                    <table id="tabella-elenco-regate-suggerite" style="width: 100%; margin-top: 10px;">
                        <thead>
                            <tr>
                                <th data-i18n-key="VSR_TABLE_HEADER_DATE">Data</th>
                                <th data-i18n-key="VSR_TABLE_HEADER_RACE_NAME">Nome Regata</th>
                                <th data-i18n-key="VSR_TABLE_HEADER_LEVEL">Livello</th>
                                <th data-i18n-key="VSR_MODAL_POINTS_BASE">Punti Base</th>
                                <th data-i18n-key="VSR_MODAL_YOUR_RANKING">Tua Classifica</th>
                                <th data-i18n-key="VSR_MODAL_ACTION">Azione</th>
                            </tr>
                        </thead>
                        <tbody id="tbody-elenco-regate-suggerite">
                            <!-- Le righe delle regate suggerite verranno popolate da JavaScript -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <div id="analisi-view" class="view-section" style="display: none;">
        <h1 data-i18n-key="ANALYSIS_PAGE_TITLE">Analisi Classifica VSR</h1>

        <div class="analisi-container"> <!-- Contenitore principale per le sezioni di analisi -->

            <div class="analisi-sezione" id="panoramica-slot-vsr">
                <h2 data-i18n-key="ANALYSIS_SECTION_OVERVIEW_TITLE">Panoramica Slot VSR</h2>
                <!-- Contenitore per descrizione e legenda -->
                <div class="descrizione-e-legenda-container">
                    <p class="descrizione-panoramica" data-i18n-key="ANALYSIS_SECTION_OVERVIEW_DESCRIPTION">Visualizza lo stato attuale dei tuoi slot VSR e identifica le opportunità di miglioramento.</p>
                    <div class="legenda-analisi">
                        <span class="legenda-item"><span class="colore-campione" style="background-color: #28a745;"></span><span data-i18n-key="ANALYSIS_LEGEND_OPTIMAL">Ottimale</span></span>
                        <span class="legenda-item"><span class="colore-campione" style="background-color: #ffc107;"></span><span data-i18n-key="ANALYSIS_LEGEND_PARTIAL">Parziale</span></span>
                        <span class="legenda-item"><span class="colore-campione" style="background-color: #dc3545;"></span><span data-i18n-key="ANALYSIS_LEGEND_CRITICAL">Critico</span></span>
                        <span class="legenda-item"><span class="colore-campione" style="background-color: var(--colore-punti-100);"></span><span data-i18n-key="ANALYSIS_LEGEND_100_PERCENT">100%</span></span>
                        <span class="legenda-item"><span class="colore-campione" style="background-color: var(--colore-punti-50);"></span><span data-i18n-key="ANALYSIS_LEGEND_50_PERCENT">50%</span></span>
                        <span class="legenda-item"><span class="colore-campione" style="background-color: var(--colore-punti-vuoti);"></span><span data-i18n-key="ANALYSIS_LEGEND_EMPTY">Vuoto</span></span>
                    </div>
                </div>
                
                <div id="slot-vsr-container">
                    <div class="slot-categoria" id="slot-hc-container">
                        <h3 data-i18n-key="ANALYSIS_SLOT_CATEGORY_HC">Fuori Categoria</h3>
                        <div class="slot-info">
                            <div class="slot-info-header">
                                <p class="slot-occupati-info"><strong data-i18n-key="ANALYSIS_SLOT_LABEL_OCCUPIED">Slot Occupati:</strong> <span id="hc-occupati">0</span>/2</p> <!-- Aggiornato il totale qui -->
                                <p class="slot-punti-categoria"><strong data-i18n-key="ANALYSIS_SLOT_LABEL_CATEGORY_POINTS">Punti Categoria:</strong> <span id="hc-punti-categoria">N/A</span></p>
                            </div>
                            <div class="progress-bar-container">
                                <div class="progress-bar" id="hc-progress-bar" title="Riempimento Slot"></div>
                            </div>
                            <p class="stacked-bar-label">Composizione Punti VSR:</p>
                            <div class="stacked-points-bar-container" id="hc-stacked-points-bar-container">
                                <div class="points-bar-segment points-bar-100" id="hc-points-bar-100"></div>
                                <div class="points-bar-segment points-bar-50" id="hc-points-bar-50"></div>
                                <div class="points-bar-segment points-bar-empty" id="hc-points-bar-empty"></div>
                            </div>
                            <p><strong data-i18n-key="ANALYSIS_SLOT_LABEL_CURRENT_RACE_SCORE">Punteggio Gara Attuale (Migliore):</strong> <span id="hc-punti-attuali">N/A</span></p> <!-- Testo aggiornato per chiarezza -->
                            <div class="gare-slot" id="hc-gare-slot">
                                <!-- Dettaglio gara HC -->
                            </div>
                        </div>
                    </div>
                    <div class="slot-categoria" id="slot-liv1-container">
                        <h3 data-i18n-key="ANALYSIS_SLOT_CATEGORY_L1">Livello 1</h3>
                        <div class="slot-info">
                            <div class="slot-info-header">
                                <p class="slot-occupati-info"><strong data-i18n-key="ANALYSIS_SLOT_LABEL_OCCUPIED">Slot Occupati:</strong> <span id="liv1-occupati">0</span>/6</p> <!-- Aggiornato il totale qui -->
                                <p class="slot-punti-categoria"><strong data-i18n-key="ANALYSIS_SLOT_LABEL_CATEGORY_POINTS">Punti Categoria:</strong> <span id="liv1-punti-categoria">N/A</span></p>
                            </div>
                            <div class="progress-bar-container">
                                <div class="progress-bar" id="liv1-progress-bar" title="Riempimento Slot"></div>
                            </div>
                            <p class="stacked-bar-label" data-i18n-key="ANALYSIS_SLOT_LABEL_POINTS_COMPOSITION">Composizione Punti VSR:</p>
                            <div class="stacked-points-bar-container" id="liv1-stacked-points-bar-container">
                                <div class="points-bar-segment points-bar-100" id="liv1-points-bar-100"></div>
                                <div class="points-bar-segment points-bar-50" id="liv1-points-bar-50"></div>
                                <div class="points-bar-segment points-bar-empty" id="liv1-points-bar-empty"></div>
                            </div>
                            <p><strong data-i18n-key="ANALYSIS_SLOT_LABEL_MIN_CONTRIBUTING_SCORE">Punteggio Minimo Contributivo:</strong> <span id="liv1-min-punti">N/A</span></p>
                            <div class="gare-slot" id="liv1-gare-slot">
                                <!-- Dettaglio gare Livello 1 -->
                            </div>
                        </div>
                    </div>
                    <div class="slot-categoria" id="slot-liv2-container">
                        <h3 data-i18n-key="ANALYSIS_SLOT_CATEGORY_L2">Livello 2</h3>
                        <div class="slot-info">
                            <div class="slot-info-header">
                                <p class="slot-occupati-info"><strong data-i18n-key="ANALYSIS_SLOT_LABEL_OCCUPIED">Slot Occupati:</strong> <span id="liv2-occupati">0</span>/12</p> <!-- Aggiornato il totale qui -->
                                <p class="slot-punti-categoria"><strong data-i18n-key="ANALYSIS_SLOT_LABEL_CATEGORY_POINTS">Punti Categoria:</strong> <span id="liv2-punti-categoria">N/A</span></p>
                            </div>
                            <div class="progress-bar-container">
                                <div class="progress-bar" id="liv2-progress-bar" title="Riempimento Slot"></div>
                            </div>
                            <p class="stacked-bar-label" data-i18n-key="ANALYSIS_SLOT_LABEL_POINTS_COMPOSITION">Composizione Punti VSR:</p>
                            <div class="stacked-points-bar-container" id="liv2-stacked-points-bar-container">
                                <div class="points-bar-segment points-bar-100" id="liv2-points-bar-100"></div>
                                <div class="points-bar-segment points-bar-50" id="liv2-points-bar-50"></div>
                                <div class="points-bar-segment points-bar-empty" id="liv2-points-bar-empty"></div>
                            </div>
                            <p><strong data-i18n-key="ANALYSIS_SLOT_LABEL_MIN_CONTRIBUTING_SCORE">Punteggio Minimo Contributivo:</strong> <span id="liv2-min-punti">N/A</span></p>
                            <div class="gare-slot" id="liv2-gare-slot">
                                <!-- Dettaglio gare Livello 2 -->
                            </div>
                        </div>
                    </div>
                    <div class="slot-categoria" id="slot-liv3-container">
                        <h3 data-i18n-key="ANALYSIS_SLOT_CATEGORY_L3">Livello 3</h3>
                        <div class="slot-info">
                            <div class="slot-info-header">
                                <p class="slot-occupati-info"><strong data-i18n-key="ANALYSIS_SLOT_LABEL_OCCUPIED">Slot Occupati:</strong> <span id="liv3-occupati">0</span>/20</p> <!-- Aggiornato il totale qui -->
                                <p class="slot-punti-categoria"><strong data-i18n-key="ANALYSIS_SLOT_LABEL_CATEGORY_POINTS">Punti Categoria:</strong> <span id="liv3-punti-categoria">N/A</span></p>
                            </div>
                            <div class="progress-bar-container">
                                <div class="progress-bar" id="liv3-progress-bar" title="Riempimento Slot"></div>
                            </div>
                            <p class="stacked-bar-label" data-i18n-key="ANALYSIS_SLOT_LABEL_POINTS_COMPOSITION">Composizione Punti VSR:</p>
                            <div class="stacked-points-bar-container" id="liv3-stacked-points-bar-container">
                                <div class="points-bar-segment points-bar-100" id="liv3-points-bar-100"></div>
                                <div class="points-bar-segment points-bar-50" id="liv3-points-bar-50"></div>
                                <div class="points-bar-segment points-bar-empty" id="liv3-points-bar-empty"></div>
                            </div>
                            <p><strong data-i18n-key="ANALYSIS_SLOT_LABEL_MIN_CONTRIBUTING_SCORE">Punteggio Minimo Contributivo:</strong> <span id="liv3-min-punti">N/A</span></p>
                            <div class="gare-slot" id="liv3-gare-slot">
                                <!-- Dettaglio gare Livello 3 -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <hr class="separatore-analisi" style="margin: 30px 0;"> <!-- Questo HR rimane per separare dalla prossima sezione (simulatore) -->

            <!-- Placeholder per future sezioni come il simulatore -->
            <div class="analisi-sezione" id="simulatore-impatto-gara" style="display: none;"> <!-- Nascosto per ora -->
                <h2>Simulatore Impatto Nuova Gara</h2>
                <p>(Funzionalità futura)</p>
            </div>

        </div> <!-- Fine analisi-container -->

        <p id="autore-analisi" class="autore-credits" data-i18n-key="ANALYSIS_AUTHOR_TEXT">Analisi by Velatopiano-La Casa di Hilde</p>
    </div>

    <!-- Nuova Sezione Strategia Classifica VSR -->
    <div id="strategia-view" class="view-section" style="display: none;">
        <h1 data-i18n-key="STRATEGY_PAGE_TITLE">Strategia Classifica VSR</h1>
        <p data-i18n-key="STRATEGY_PAGE_DESCRIPTION">Ottimizza la tua classifica VSR analizzando le opportunità, le debolezze e le scadenze con un focus strategico.</p>

        <!-- Contenitore principale per layout a due colonne -->
        <div id="strategia-layout-container">

            <!-- Colonna sinistra: Grafico a Torta -->
            <div id="strategia-grafico-box">
                 <!-- Contenitore per il Grafico a Torta (Spostato qui) -->
                <div id="grafico-torta-container"> <!-- Manteniamo l'ID per ora, potremmo cambiarlo se necessario -->
                    <h2 data-i18n-key="STRATEGY_PIE_CHART_BOX_TITLE">Stato Ottimizzazione Slot</h2>
                    <div class="canvas-wrapper-strategia"> <!-- NUOVO WRAPPER PER IL CANVAS -->
                        <canvas id="graficoTortaComposizioneVSR"></canvas>
                    </div>
                    <div class="spiegazione-grafico">
                        <p><strong data-i18n-key="STRATEGY_PIE_CHART_EXPLANATION_TITLE">Come leggere e usare questo grafico per la tua strategia (basato su 40 slot):</strong></p>
                        <p data-i18n-key="STRATEGY_PIE_CHART_EXPLANATION_P1">Questo grafico a torta è il tuo "check-up" strategico: illustra lo stato di ottimizzazione dei tuoi slot VSR, ponderato per il <strong>potenziale di punteggio massimo</strong> di ciascuna categoria (Fuori Categoria, Livello 1, Livello 2, Livello 3). Ti aiuta a capire dove stai performando bene e dove hai margini di miglioramento per scalare la classifica.</p>
                        <!-- MODIFICATO: Chiarito che il potenziale massimo tiene conto del decadimento -->
                        <p data-i18n-key="STRATEGY_PIE_CHART_EXPLANATION_P2">
                            Ogni categoria di gara è rappresentata da un colore. La <strong>dimensione totale</strong> della fetta di una categoria (somma delle parti "Ottimizzato" e "Migliorabile") riflette il suo peso sul potenziale VSR totale.
                        </p>
                        <p data-i18n-key="STRATEGY_PIE_CHART_EXPLANATION_P3_INTRO">
                            Per ogni categoria, il grafico è diviso in due segmenti che insieme rappresentano il 100% del potenziale di "salute" di quella categoria:
                            <ul>
                                <li data-i18n-key="STRATEGY_PIE_CHART_EXPLANATION_P3_LI1">La parte <strong>colorata più intensa ("Ottimizzato")</strong>: Indica la percentuale di "salute" attuale della categoria. Un alto valore qui significa che gli slot sono ben riempiti con gare i cui punteggi massimizzano il potenziale di ciascun singolo slot (considerando il loro contributo al 100% o al 50%).</li>
                                <li data-i18n-key="STRATEGY_PIE_CHART_EXPLANATION_P3_LI2">La parte <strong>colorata più tenue ("Migliorabile")</strong>: Mostra la percentuale di "salute" ancora da conquistare per quella categoria. Rappresenta slot vuoti o gare con punteggi che possono essere significativamente migliorati.</li>
                            </ul>
                        </p>
                        <p data-i18n-key="STRATEGY_PIE_CHART_EXPLANATION_P4_INTRO">
                            <strong>Valori nel tooltip:</strong> Passando il mouse su una fetta, il tooltip mostra:
                            <ul>
                                <li data-i18n-key="STRATEGY_PIE_CHART_EXPLANATION_P4_LI1"><strong>"Salute slot" (XX%)</strong>: Misura l'<em>efficienza</em> con cui gestisci gli slot di quella categoria (riempimento e qualità media dei punti). Un valore alto è ottimo.</li>
                                <li data-i18n-key="STRATEGY_PIE_CHART_EXPLANATION_P4_LI2"><strong>"Miglioramento potenziale" (YY%)</strong>: È <code>100% - Salute slot</code>. Indica quanto margine hai per ottimizzare la gestione di quella categoria.</li>
                                <li data-i18n-key="STRATEGY_PIE_CHART_EXPLANATION_P4_LI3"><strong>Punti VSR: Attuali / Potenziali</strong> (es. per HC: "18.500 / 22.500", per LIV1: "35.000 / 45.000"): Confronta i tuoi punti VSR reali con il massimo teorico per quella categoria. Questo potenziale massimo considera che metà degli slot contribuiscono al 100% e l'altra metà al 50% del punteggio base della gara.</li>
                                <li data-i18n-key="STRATEGY_PIE_CHART_EXPLANATION_P4_LI4"><strong>Percentuale del Potenziale Categoria (ZZ%)</strong>: È <code>(Punti Attuali / Punti Potenziali) * 100</code>. Indica quanto sei vicino a massimizzare i punti VSR <em>per quella specifica categoria</em>, tenendo conto del potenziale corretto.</li>
                            </ul>
                        </p>
                        <p><strong data-i18n-key="STRATEGY_PIE_CHART_EXPLANATION_P5_INTRO">Interpretazione combinata per la strategia:</strong></p>
                        <ul>
                            <li data-i18n-key="STRATEGY_PIE_CHART_EXPLANATION_P5_LI1"><strong>Bassa "Salute slot" (XX%) e bassa "% Potenziale Cat." (ZZ%):</strong> Area critica! Questa categoria necessita della tua massima attenzione. Devi partecipare a più gare e puntare a migliorare significativamente i tuoi piazzamenti.</li>
                            <li data-i18n-key="STRATEGY_PIE_CHART_EXPLANATION_P5_LI2"><strong>Alta "Salute slot" (XX%) ma bassa "% Potenziale Cat." (ZZ%):</strong> Le gare che hai inserito sono buone, ma probabilmente hai ancora slot vuoti. Concentrati sul riempire gli slot mancanti con gare di qualità simile.</li>
                            <li data-i18n-key="STRATEGY_PIE_CHART_EXPLANATION_P5_LI3"><strong>Bassa "Salute slot" (XX%) ma alta "% Potenziale Cat." (ZZ%):</strong> Situazione meno comune. Potrebbe significare che hai riempito molti slot, ma con gare dai punteggi non eccelsi, anche se nel complesso hai già accumulato una buona parte dei punti potenziali. Cerca di sostituire le gare con i punteggi più bassi.</li>
                            <li data-i18n-key="STRATEGY_PIE_CHART_EXPLANATION_P5_LI4"><strong>Alta "Salute slot" (XX%) e alta "% Potenziale Cat." (ZZ%):</strong> Ottimo lavoro! Questa categoria è ben ottimizzata. Mantieni questo livello e cerca eventuali micro-miglioramenti se possibile.</li>
                        </ul>
                        <p data-i18n-key="STRATEGY_PIE_CHART_EXPLANATION_P6"><em>Interattività:</em> Puoi cliccare sulle etichette nella legenda del grafico per mostrare o nascondere le singole fette e analizzare meglio specifiche categorie o stati.</p>
                        <p data-i18n-key="STRATEGY_PIE_CHART_EXPLANATION_P7"><em>Obiettivo:</em> Usa queste informazioni per massimizzare le porzioni "Ottimizzate" e ridurre quelle "Migliorabili", avvicinandoti così al tuo punteggio VSR massimo possibile. I suggerimenti strategici specifici che trovi accanto al grafico ti aiuteranno ulteriormente in questo compito.</p>
                    </div>
                </div>
            </div>

            <!-- Colonna destra: Suggerimenti e Monitoraggio Scadenze -->
            <div id="strategia-contenuto-box">

                <div class="analisi-sezione" id="monitoraggio-scadenze">
                    <div class="strategia-header-con-pulsante">
                        <h2 data-i18n-key="STRATEGY_DEADLINES_BOX_TITLE">Monitoraggio Scadenze e Dimezzamenti</h2>
                        <button id="btn-toggle-recent-events" class="toggle-summary-btn" data-i18n-key="STRATEGY_CHANGES_BUTTON_TEXT">Cosa è Cambiato?</button>
                    </div>
                    <!-- Contenitore per il riepilogo degli eventi passati -->
                    <div id="recent-events-summary" class="summary-content" style="display: none;"></div>
                    <div id="scadenze-container">
                        <div class="scadenze-categoria">
                            <h4 data-i18n-key="STRATEGY_DEADLINES_SUBTITLE_HALVING">Gare in Dimezzamento Imminente (da 100% a 50%)</h4>
                            <ul id="lista-gare-dimezzamento">
                                <li class="no-data">Nessuna gara in dimezzamento imminente.</li>
                            </ul>
                        </div>
                        <div class="scadenze-categoria" style="margin-top: 20px;">
                            <h4 data-i18n-key="STRATEGY_DEADLINES_SUBTITLE_EXPIRING">Gare in Scadenza Imminente (da 50% a 0%)</h4>
                            <ul id="lista-gare-scadenza">
                                <li class="no-data">Nessuna gara in scadenza imminente.</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <hr class="separatore-analisi" style="margin: 30px 0;">

                <div class="analisi-sezione" id="valutazione-strategica-slot">
                    <h2 data-i18n-key="STRATEGY_EVALUATION_BOX_TITLE">Valutazione Strategica degli Slot VSR</h2>
                    <p data-i18n-key="STRATEGY_EVALUATION_DESCRIPTION">Analisi delle opportunità e delle debolezze degli slot VSR con un focus sulla difficoltà e la priorità di intervento.</p>
                    <ul id="lista-suggerimenti-strategici-slot">
                        <li class="no-data">Nessun suggerimento strategico disponibile al momento.</li>
                    </ul>
                </div>
            </div>
        </div> <!-- Fine strategia-layout-container -->
        <p id="autore-strategia" class="autore-credits" data-i18n-key="STRATEGY_AUTHOR_TEXT">Strategia by Velatopiano-La Casa di Hilde</p>
    </div>

    <!-- Finestra Modale per Notifica Variazione VSR -->
    <div id="vsr-change-modal" class="modal" style="display: none;">
        <div class="modal-content">
            <h2 id="vsr-change-modal-title" data-i18n-key="VSR_CHANGE_MODAL_TITLE"></h2>
            <p id="vsr-change-modal-body"></p>
            <p id="vsr-change-modal-instruction" data-i18n-key="VSR_CHANGE_MODAL_INSTRUCTION"></p>
            <div class="modal-footer">
                <button id="vsr-change-modal-primary-btn" class="dashboard-action-button" data-i18n-key="VSR_CHANGE_MODAL_PRIMARY_BUTTON"></button>
                <button id="vsr-change-modal-secondary-btn" class="nav-button" data-i18n-key="VSR_CHANGE_MODAL_SECONDARY_BUTTON"></button>
            </div>
        </div>
    </div>


    <script src="script.js"></script>
</body>
</html>
